@model BlogVM
<div id="content" class="main-content-wrapper">
    <div class="blog-posts-section">
        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-9">
                    <main id="primary" class="site-main">
                        <div class="single-post-wrapper">
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <article class="blog-post post-entry">
                                        <div class="single-post">
                                            <div class="content-wrapper">
                                                <div class="post-media image-popup">
                                                    <figure>
                                                        <a href="~/assets/images/blog/blog-single-large.jpg" data-size="1920x930">
                                                            <img src="~/assets/images/blog/@Model.Blog.Image" alt="Blog Details">
                                                            <div class="image-overlay"><i class="ion ion-ios-add"></i></div>
                                                        </a>
                                                        <figcaption class="visually-hidden">
                                                            <span>Blog Details</span>
                                                        </figcaption>
                                                    </figure>
                                                </div>
                                                <div class="post-content">
                                                    <h3 class="post-title">@Model.Blog.Title</h3>
                                                    <div class="post-meta">
                                                        <p>
                                                            <span>
                                                                By
                                                                <span class="single-meta">
                                                                    <a href="#">@Model.Blog.PublisherName</a>
                                                                </span>
                                                            </span>
                                                            <span class="post-categories">
                                                                In
                                                                <span class="single-meta">
                                                                    @foreach (Tag tag in ViewBag.Tags)
                                                                    {
                                                                        if (tag.Id == ViewBag.TagId)
                                                                        {
                                                                            <a asp-controller="blog" asp-action="toTag" asp-route-tag="@tag.Id" style="color: #c1001c;">@tag.Name</a>
                                                                        }
                                                                        else
                                                                        {
                                                                            <a asp-controller="blog" asp-action="toTag" asp-route-tag="@tag.Id">@tag.Name</a>
                                                                        }
                                                                    }
                                                                </span>
                                                            </span>
                                                            <span>
                                                                Posted on
                                                                <span class="single-meta">
                                                                    <a href="#">@Model.Blog.CreatedAt</a>
                                                                </span>
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <div class="post-description">
                                                        <div class="post-details">
                                                           
                                                            <p>There boluptatum deleniti atque corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi tempora incidunt  obtain pain of itself, because it is pain, but because occasionally <a href="#">circumstances occur</a> in which toil and pain can procure him some great pleasure  obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi tempora incidunt  obtain pain of itself, because it is pain.</p>

                                                            <p>Someone boluptatum deleniti atque corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi tempora incidunt obtain pain of itself, because it is pain, but <a href="#">because occasionally circumstances occur</a> in which toil and pain can procure him some great pleasure obtain.</p>

                                                            <div class="row align-items-center my-4 my-sm-5">
                                                                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-4 mb-sm-4 mb-md-0">
                                                                    <img src="~/assets/images/blog/blog-inner-1.jpg" alt="Post Inner Image">
                                                                </div>
                                                                <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                                                    <img src="~/assets/images/blog/blog-inner-2.jpg" alt="Post Inner Image">
                                                                </div>
                                                            </div>

                                                            <p>Someone boluptatum deleniti atque corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi tempora incidunt  obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure obtain corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi tempora incidunt  obtain pain of itself, because it is pain</p>

                                                            <blockquote class="blockquote">
                                                                <p>"While most companies strive to deliver seamless and issue-free customer service, what they often fail to understand is just how significantly their processes good and bad can impact their overall service delivery and, ultimately, how their customers view them."</p>
                                                                <footer class="blockquote-footer">Devid Chory</footer>
                                                            </blockquote>

                                                            <p>There boluptatum deleniti atque corrupti sdolores et quas molestias cepturi sint  eca itate non similique sunt in culpa modi <a href="#">tempora incidunt obtain</a> pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure obtain pain of itself, because it is pain, but because occasionally circumstances occur in which toil and pain can procure him some great pleasure someone boluptatum deleniti atque corrupti sdolores et quas molestias cepturi sint  eca itate non </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="post-footer">
                                                    <div class="d-md-flex justify-content-sm-between">
                                                     
                                                     
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </article>

                                    <div class="author-box">
                                        <div class="media">
                                            <div class="author-image mb-4 mb-sm-4 mb-md-0 me-md-4">
                                                <img src="~/assets/images/testimonial/testimonial-2.jpg" alt="blog-comment">
                                            </div>
                                            <div class="author-description flex-grow-1">
                                                <h6>Author: <a href="#">Stuart Smith</a></h6>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Temporibus harum, est fuga veritatis esse dignissimos optio sunt obcaecati sit quos. Maiores tempora harum fugit voluptates?</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="post-pagination">
                                      
                                    </div>

                                    <div id="comments" class="comments-area">
                                        <h3>This post has <span class="CommentCount">@Model.Reviews.Count()</span> Comments</h3>
                                        <ol class="comment-list list-unstyled">
                                            @await Html.PartialAsync("_AddReviewPartial", Model);
                                        </ol>

                                        <div class="comment-form">
                                            <h3>Leave a comment</h3>
                                            <form method="post" id="comment_form">
                                                <div class="row mb-3">
                                                    <div class="form-group col-12 col-sm-12 col-md-12">
                                                        <textarea id="MessageMain" name="MessageMain" placeholder="Your Comment *" name="comment" class="form-control" required></textarea>
                                                    </div>
                                                </div>
                                                <div class="row mb-3">
                                                    <div class="form-group col-12 col-sm-12 col-md-4">
                                                        <input type="text" class="form-control" id="com-name" placeholder="Name *" required>
                                                    </div>
                                                    <div class="form-group col-12 col-sm-12 col-md-4">
                                                        <input type="email" class="form-control" id="com-email" placeholder="Email *" required>
                                                    </div>
                                                   
                                                </div>

                                                <div class="row">
                                                    <div class="form-group col-12 col-sm-12 col-md-12 mb0">
                                                        @if (!User.Identity.IsAuthenticated)
                                                        {
                                                            <a asp-controller="account" asp-action="Login" id="submit_my_comment" class="btn btn-secondary">Submit Comment</a>

                                                        }
                                                        else
                                                        {
                                                            <input name="submit" type="submit" data-bid="@Model.Blog.Id" id="submit_my_comment" class="addReview btn btn-secondary" value="Submit Comment">
                                                        }
                                                    </div>
                                                </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-3">
                    <aside id="secondary" class="widget-area">
                        <div class="sidebar-widget search-widget">
                            <h2 class="widgettitle">Search</h2>
                            <div class="search-content">
                                <form action="#" class="input-group">
                                    <input class="form-control" type="search" name="s" title="search" placeholder="Search...">
                                    <input type="submit" class="btn btn-secondary" value="search">
                                </form>
                            </div>
                        </div>

                        <div class="sidebar-widget recent-posts">
                            <h2 class="widgettitle">Recent Posts</h2>
                            <div class="recent-posts-widget-container">
                                <div class="element-carousel" data-visible-slide="1" data-visible-xl-slide="1" data-visible-lg-slide="1" data-visible-md-slide="1" data-visible-sm-slide="1" data-loop="true" data-autoplay-delay="7000">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide">
                                            @foreach (Blog blog in Model.Blogs.Take(3))
                                            {
                                                <div class="posts-single media">
                                                    <div class="post-thumbnail me-4 me-lg-3 me-xl-4">
                                                        <a href="#">
                                                            <img src="~/assets/images/blog/@blog.Image" alt="Blog Image">
                                                            <div class="overlay"></div>
                                                        </a>
                                                    </div>
                                                    <div class="post-content flex-grow-1">
                                                        <div class="post-title">
                                                            <h5><a href="blog-details.html">@blog.Title</a></h5>
                                                        </div>
                                                        <div class="post-date">@blog.CreatedAt</div>
                                                    </div>
                                                </div>
                                            }
                                        </div>

                                        <div class="swiper-slide">
                                            @foreach (Blog blog in Model.Blogs.Take(3))
                                            {
                                                <div class="posts-single media">
                                                    <div class="post-thumbnail me-4 me-lg-3 me-xl-4">
                                                        <a href="#">
                                                            <img src="~/assets/images/blog/@blog.Image" alt="Blog Image">
                                                            <div class="overlay"></div>
                                                        </a>
                                                    </div>
                                                    <div class="post-content flex-grow-1">
                                                        <div class="post-title">
                                                            <h5><a href="blog-details.html">@blog.Title</a></h5>
                                                        </div>
                                                        <div class="post-date">@blog.CreatedAt</div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>

                                    <div class="swiper-arrow prev fa fa-angle-left"></div>
                                    <div class="swiper-arrow next fa fa-angle-right"></div>
                                </div>
                            </div>
                        </div>
             

                        @*<div class="sidebar-widget tag-cloud">
                            <h2 class="widgettitle">Tag Cloud</h2>
                            <div class="tags-widget">
                                <ul>
                                    @foreach (Tag tag in ViewBag.Tags)
                                    {
                                        <li><a href="#">@tag.Name</a></li>
                                    }
                                </ul>
                            </div>
                        </div>*@

                        <div class="sidebar-widget instagram-widget">
                            <h2 class="widgettitle">Latest Instagram</h2>
                            <div class="instagram-area">
                                <div id="instagram_feed" class="image-popup"></div>
                                <p>Follow Us <a href="https://www.instagram.com/perbello_boutique/" target="_blank">@@Instagram</a>.</p>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
    $(document).on("click", ".addReview", function (e) {
        e.preventDefault()
        var id = $(this).attr("data-bid");
        var Message = $("#MessageMain").val().trim()
        fetch("AddReview" + "?Message=" + Message + "&bid=" + id).then(res => {
            return res.text();
        }).then(data => {
            $(".comment-list").html(data);
            $("#MessageMain").val("");
            fetch("CommentCount" + "?id=" + id).then(response => {
                return response.text()
            }).then(data => {
                $(".CommentCount").html(data);
            })
        })
    })
</script>